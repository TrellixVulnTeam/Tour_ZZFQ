{"ast":null,"code":"import _defineProperty from\"E:/React-Website/blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:/React-Website/blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:/React-Website/blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";// import ContactForm from \"./ContactForm\"\nimport{firebase,dd}from\"../../Firebase\";import emailjs from'emailjs-com';// import \"../images/\"\nimport\"../../App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Contacts=function Contacts(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),contactObjects=_useState2[0],setContactObjects=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),currentId=_useState4[0],setCurrentId=_useState4[1];useEffect(function(){dd.ref().child('userDataRecords').on('value',function(snapshot){if(snapshot.val()!=null)setContactObjects(_objectSpread({},snapshot.val()));else setContactObjects({});});},[]);// similar to componentDidMount\nvar addOrEdit=function addOrEdit(obj){if(currentId=='')dd.ref().child('userDataRecords').push(obj,function(err){if(err)console.log(err);else setCurrentId('');});else dd.ref().child(\"userDataRecords/\".concat(currentId)).set(obj,function(err){if(err)console.log(err);else setCurrentId('');});};function sendEmail(e){e.preventDefault();emailjs.sendForm('gmail','template_q58wczq',e.target,'user_uwIYMHs5W5kKE1aPb7MTg').then(function(result){console.log(result.text);},function(error){console.log(error.text);});e.target.reset();}var onDelete=function onDelete(key){if(window.confirm('Are you sure to delete this record?')){debugger;dd.ref().child(\"userDataRecords/\".concat(key)).remove(function(err){if(err)console.log(err);else setCurrentId('');});}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Reply to customer queries\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-7\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-borderless table-stripped\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Full Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Mobile\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date of tour\"}),/*#__PURE__*/_jsx(\"th\",{children:\"No of traveller\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Destination place\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Departure city\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Query Asked\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reply\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Object.keys(contactObjects).map(function(id){var _jsx2,_jsx3;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[contactObjects[id].firstName,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[contactObjects[id].phone,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[contactObjects[id].email,\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:contactObjects[id].date}),/*#__PURE__*/_jsx(\"td\",{children:contactObjects[id].mem}),/*#__PURE__*/_jsx(\"td\",{children:contactObjects[id].dplace}),/*#__PURE__*/_jsx(\"td\",{children:contactObjects[id].dcity}),/*#__PURE__*/_jsx(\"td\",{children:contactObjects[id].address}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"btn text-danger\",onClick:function onClick(){onDelete(id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-trash-alt\"})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"form\",{onSubmit:sendEmail,children:/*#__PURE__*/_jsxs(\"div\",{className:\"row pt-5 mx-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-8 form-group mx-auto\",children:/*#__PURE__*/_jsx(\"input\",(_jsx2={type:\"text\",className:\"form-control\"},_defineProperty(_jsx2,\"type\",\"hidden\"),_defineProperty(_jsx2,\"value\",contactObjects[id].Name),_defineProperty(_jsx2,\"placeholder\",\"Name\"),_defineProperty(_jsx2,\"name\",\"name\"),_jsx2))}),/*#__PURE__*/_jsx(\"div\",{className:\"col-8 form-group pt-2 mx-auto\",children:/*#__PURE__*/_jsx(\"input\",(_jsx3={type:\"email\",className:\"form-control\"},_defineProperty(_jsx3,\"type\",\"hidden\"),_defineProperty(_jsx3,\"value\",contactObjects[id].email),_defineProperty(_jsx3,\"placeholder\",\"Email Address\"),_defineProperty(_jsx3,\"name\",\"email\"),_jsx3))}),/*#__PURE__*/_jsx(\"div\",{className:\"col-8 form-group pt-2 mx-auto\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Subject\",name:\"subject\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-8 form-group pt-2 mx-auto\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",id:\"\",cols:\"30\",rows:\"8\",placeholder:\"Your message\",name:\"message\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-8 pt-3 mx-auto\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"btn btn-info\",value:\"Reply\"})})]})})})]},id);})})]})})})]});};export default Contacts;","map":{"version":3,"sources":["E:/React-Website/blog/src/components/pages/Contactdetail.js"],"names":["React","useState","useEffect","useRef","firebase","dd","emailjs","Contacts","contactObjects","setContactObjects","currentId","setCurrentId","ref","child","on","snapshot","val","addOrEdit","obj","push","err","console","log","set","sendEmail","e","preventDefault","sendForm","target","then","result","text","error","reset","onDelete","key","window","confirm","remove","Object","keys","map","id","firstName","phone","email","date","mem","dplace","dcity","address","Name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect ,useRef} from \"react\";\r\n// import ContactForm from \"./ContactForm\"\r\nimport {firebase,dd} from \"../../Firebase\";\r\nimport emailjs from 'emailjs-com';\r\n// import \"../images/\"\r\nimport \"../../App.css\"\r\n\r\nconst Contacts = () => {\r\n\r\n    var [contactObjects, setContactObjects] = useState({})\r\n    var [currentId, setCurrentId] = useState('')\r\n\r\n    useEffect(() => {\r\n        dd.ref().child('userDataRecords').on('value', snapshot => {\r\n            if (snapshot.val() != null)\r\n                setContactObjects({\r\n                    ...snapshot.val()\r\n                })\r\n            else\r\n                setContactObjects({})\r\n\r\n        })\r\n    }, [])// similar to componentDidMount\r\n\r\n    const addOrEdit = obj => {\r\n        if (currentId == '')\r\n       dd.ref().child('userDataRecords').push(\r\n                obj,\r\n                err => {\r\n                    if (err)\r\n                        console.log(err)\r\n                    else\r\n                        setCurrentId('')\r\n                }\r\n            )\r\n        else\r\n        dd.ref().child(`userDataRecords/${currentId}`).set(\r\n                obj,\r\n                err => {\r\n                    if (err)\r\n                        console.log(err)\r\n                    else\r\n                        setCurrentId('')\r\n                }\r\n            )\r\n    }\r\n    function sendEmail(e) {\r\n        e.preventDefault();\r\n\r\n    emailjs.sendForm('gmail', 'template_q58wczq', e.target, 'user_uwIYMHs5W5kKE1aPb7MTg')\r\n        .then((result) => {\r\n            console.log(result.text);\r\n        }, (error) => {\r\n            console.log(error.text);\r\n        });\r\n        e.target.reset()\r\n    }\r\n    const onDelete = key => {\r\n        if (window.confirm('Are you sure to delete this record?')) {\r\n            debugger\r\n           dd.ref().child(`userDataRecords/${key}`).remove(\r\n                err => {\r\n                    if (err)\r\n                        console.log(err)\r\n                    else\r\n                        setCurrentId('')\r\n                }\r\n            )\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <h2>Reply to customer queries</h2>\r\n            {/* <div className=\"jumbotron jumbotron-fluid\">\r\n                 <div className=\"container\">\r\n                    <h1 className=\"display-4 text-center\">Contact Register</h1>\r\n                </div> \r\n            </div> */}\r\n            \r\n            <div className=\"row\">\r\n                \r\n                <div className=\"col-md-7\">\r\n\r\n                    <table className=\"table table-borderless table-stripped\">\r\n                        <thead className=\"thead-light\">\r\n                            <tr>\r\n                                <th>Full Name</th>\r\n                                <th>Mobile</th>\r\n                                <th>Email</th>\r\n                                <th>Date of tour</th>\r\n                                <th>No of traveller</th>\r\n                                \r\n                                <th>Destination place</th>\r\n                                <th>Departure city</th>\r\n                                <th>Query Asked</th>\r\n                                <th>Reply</th>\r\n                                <th>Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {\r\n                                Object.keys(contactObjects).map(id => {\r\n                                    return <tr key={id}>\r\n                                    \r\n                                        \r\n                                        <td>{contactObjects[id].firstName} </td>\r\n                                       \r\n                                        <td>{contactObjects[id].phone} </td>\r\n                                        <td>{contactObjects[id].email} </td>\r\n                                        <td>{contactObjects[id].date}</td>\r\n                                        <td>{contactObjects[id].mem}</td>\r\n                                        <td>{contactObjects[id].dplace}</td>\r\n                                        <td>{contactObjects[id].dcity}</td>\r\n                                        <td>{contactObjects[id].address}</td>\r\n                                        \r\n                                        \r\n                        \r\n                        \r\n                                        <td>\r\n                                            {/* <a className=\"btn text-primary\" onClick={() => { addOrEdit(id) }}>\r\n                                                <i className=\"fas fa-pencil-alt\"></i>\r\n                                            </a> */}\r\n                                            <a className=\"btn text-danger\" onClick={() => { onDelete(id) }}>\r\n                                                <i className=\"far fa-trash-alt\"></i>\r\n                                            </a>\r\n                                        </td>\r\n                                        <td>\r\n                                        <form onSubmit={sendEmail}>\r\n                    <div className=\"row pt-5 mx-auto\">\r\n                        <div className=\"col-8 form-group mx-auto\">\r\n                            <input type=\"text\" className=\"form-control\"  type=\"hidden\"  value={contactObjects[id].Name} placeholder=\"Name\" name=\"name\"/>\r\n                        </div>\r\n                        <div className=\"col-8 form-group pt-2 mx-auto\">\r\n                            <input type=\"email\"  className=\"form-control\" type=\"hidden\" value={contactObjects[id].email} placeholder=\"Email Address\" name=\"email\"/>\r\n                        </div>\r\n                        <div className=\"col-8 form-group pt-2 mx-auto\">\r\n                            <input type=\"text\" className=\"form-control\" placeholder=\"Subject\" name=\"subject\"/>\r\n                        </div>\r\n                        <div className=\"col-8 form-group pt-2 mx-auto\">\r\n                            <textarea className=\"form-control\" id=\"\" cols=\"30\" rows=\"8\" placeholder=\"Your message\" name=\"message\"></textarea>\r\n                        </div>\r\n                        <div className=\"col-8 pt-3 mx-auto\">\r\n                            <input type=\"submit\" className=\"btn btn-info\" value=\"Reply\"></input>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n                </td>               \r\n                                    </tr>\r\n                                    \r\n                                })\r\n                            }\r\n                        </tbody>\r\n                    </table>\r\n                    </div>\r\n                    </div>\r\n                    \r\n                   \r\n                    \r\n            {/* <form >\r\n                    <div className=\"row pt-5 mx-auto\">\r\n                        <div className=\"col-8 form-group mx-auto\">\r\n                            <input type=\"text\" className=\"form-control\" placeholder=\"Name\" name=\"name\"/>\r\n                        </div>\r\n                        <div className=\"col-8 form-group pt-2 mx-auto\">\r\n                            <input type=\"email\" className=\"form-control\" placeholder=\"Email Address\" name=\"email\"/>\r\n                        </div>\r\n                        <div className=\"col-8 form-group pt-2 mx-auto\">\r\n                            <input type=\"text\" className=\"form-control\" placeholder=\"Subject\" name=\"subject\"/>\r\n                        </div>\r\n                        <div className=\"col-8 form-group pt-2 mx-auto\">\r\n                            <textarea className=\"form-control\" id=\"\" cols=\"30\" rows=\"8\" placeholder=\"Your message\" name=\"message\"></textarea>\r\n                        </div>\r\n                        <div className=\"col-8 pt-3 mx-auto\">\r\n                            <input type=\"submit\" className=\"btn btn-info\" value=\"Send Message\"></input>\r\n                        </div>\r\n                    </div>\r\n                </form> */}\r\n            \r\n               \r\n        </>\r\n    );\r\n}\r\n\r\nexport default Contacts;"]},"metadata":{},"sourceType":"module"}